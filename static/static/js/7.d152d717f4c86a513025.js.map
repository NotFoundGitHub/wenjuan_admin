{"version":3,"sources":["webpack:///./src/components/render/renderQuest.vue","webpack:///src/views/quests/addQuest.vue","webpack:///src/components/render/renderQuest.vue","webpack:///./src/views/quests/addQuest.vue?c39b","webpack:///./src/views/quests/addQuest.vue"],"names":["addQuest","name","components","renderBox","__webpack_require__","normalizeComponent","props","render","h","_this","this","on","style","class","form","required","questIndex","title","type","kind","children","list","map","item","opType","label","value","mounted","updated","ssrContext","data","spinShow","questList","typeList","watch","computed","methods","handleAdd","push","handleSave","survey","$route","query","_id","api","then","res","status","$Message","success","msg","error","catch","err","handleDelete","cardIndex","_this2","delQuest","splice","handleTypeChange","index","child","addOption","len","length","delOption","warning","created","_this3","getQuest","quests_addQuest","_vm","_h","$createElement","_c","_self","staticClass","attrs","shape","icon","click","_v","_l","card","key","_uid","bordered","flag","slot","_s","placeholder","clearable","model","callback","$$v","$set","expression","$event","staticStyle","width","on-change","_e","size","fix","staticRenderFns","addQuest_Component","addQuest_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/7.d152d717f4c86a513025.js","sourcesContent":["function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4f2592af\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./renderQuest.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./renderQuest.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./renderQuest.vue\"\n/* template */\nvar __vue_template__ = null\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4f2592af\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/render/renderQuest.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"addQuest\">\r\n    <!-- 顶部按钮组 -->\r\n    <div class=\"header\">\r\n      <Button type=\"success\" shape=\"circle\" icon=\"md-cloud-done\" @click=\"handleSave\">保存所有</Button>\r\n      <!-- <Button type=\"primary\" shape=\"circle\" icon=\"md-add-circle\" @click=\"handleAdd\">增加题目</Button> -->\r\n    </div>\r\n    <!-- 题目卡片 -->\r\n    <template v-if=\"questList.length\">\r\n      <Card\r\n        :bordered=\"true\"\r\n        class=\"card\"\r\n        v-for=\"(card,cardIndex) in questList\"\r\n        :flag=\"card.questIndex=cardIndex\"\r\n        :index=\"cardIndex\"\r\n        :key=\"'card'+_uid+cardIndex\"\r\n      >\r\n        <div slot=\"title\" class=\"title\">\r\n          <label class=\"label\">题目{{cardIndex+1}}:</label>\r\n          <Input v-model=\"card.title\" placeholder=\"输入题目\" clearable/>\r\n          <span class=\"delBtn\" @click=\"handleDelete(cardIndex,card._id)\">x</span>\r\n        </div>\r\n        <!-- 各项选择 -->\r\n        <div class=\"body\">\r\n          <div class=\"setting\">\r\n            <div class=\"item\">\r\n              <label class=\"label\">类型:</label>\r\n              <Select\r\n                v-model=\"card.type\"\r\n                clearable\r\n                style=\"width:200px\"\r\n                @on-change=\"handleTypeChange(card.type,cardIndex)\"\r\n              >\r\n                <Option\r\n                  v-for=\"item in typeList\"\r\n                  :value=\"item.value\"\r\n                  :key=\"'type'+item.value\"\r\n                >{{ item.label }}</Option>\r\n              </Select>\r\n              <span v-if=\"card.type=='i-input'\">\r\n                <Select v-model=\"card.kind\" clearable style=\"width:100px\">\r\n                  <Option value=\"text\">单行文本框</Option>\r\n                  <Option value=\"textarea\">多行文本框</Option>\r\n                </Select>\r\n              </span>\r\n            </div>\r\n            <div class=\"item\">\r\n              <label class=\"label\">是否必填:</label>\r\n              <i-switch v-model=\"card.required\"/>\r\n            </div>\r\n            <div class=\"item\">\r\n              <Button type=\"primary\" @click=\"addOption(cardIndex)\">\r\n                <Icon type=\"md-add\"/>增加选项\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          <div class=\"options\" v-if=\"card.type&&card.type!=='i-input'&&card.type!='Rate'\">\r\n            <div\r\n              class=\"item\"\r\n              v-for=\"(item,index) in card.children.list\"\r\n              :key=\"'op'+_uid+cardIndex+index\"\r\n            >\r\n              <div class=\"op\">\r\n                <label class=\"label\">选项:</label>\r\n                <Input\r\n                  v-model.lazy=\"item.title\"\r\n                  placeholder=\"如..北京\"\r\n                  clearable\r\n                  style=\"width: 200px\"\r\n                />\r\n              </div>\r\n              <div class=\"op\">\r\n                <label class=\"label\">对应值:</label>\r\n                <Input\r\n                  v-if=\"card.type==='i-select'\"\r\n                  v-model.lazy=\"item.value\"\r\n                  placeholder=\"如..beijing\"\r\n                  clearable\r\n                  style=\"width: 200px\"\r\n                />\r\n                <Input\r\n                  v-else\r\n                  v-model.lazy=\"item.label\"\r\n                  placeholder=\"如..beijing1\"\r\n                  clearable\r\n                  style=\"width: 200px\"\r\n                />\r\n              </div>\r\n              <div class=\"op\">\r\n                <Button type=\"error\" @click=\"delOption(index,cardIndex)\">\r\n                  <Icon type=\"md-close-circle\"/>删除\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 渲染结果 -->\r\n        <Divider>渲染结果</Divider>\r\n        <render-box :form=\"card\"></render-box>\r\n      </Card>\r\n    </template>\r\n    <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\r\n    <Button type=\"primary\" shape=\"circle\" icon=\"md-add-circle\" @click=\"handleAdd\">增加题目</Button>\r\n    <BackTop></BackTop>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Api from \"@/api/index\";\r\nimport renderBox from \"@/components/render/renderQuest\";\r\nexport default {\r\n  name: \"addQuest\",\r\n  components: {\r\n    renderBox\r\n  },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      spinShow: true,\r\n      questList: [],\r\n      typeList: [\r\n        {\r\n          value: \"i-input\",\r\n          label: \"输入框\"\r\n        },\r\n        {\r\n          value: \"Rate\",\r\n          label: \"评分\"\r\n        },\r\n        {\r\n          value: \"radio-group\",\r\n          label: \"单选框\"\r\n        },\r\n\r\n        {\r\n          value: \"CheckboxGroup\",\r\n          label: \"多选框\"\r\n        },\r\n        {\r\n          value: \"i-select\",\r\n          label: \"下拉选择\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  watch: {},\r\n  computed: {},\r\n  methods: {\r\n    handleAdd() {\r\n      this.questList.push({\r\n        title: \"输入题目\",\r\n        type: \"\",\r\n        required: false,\r\n        kind: \"\",\r\n        value: \"\",\r\n        questIndex: \"\",\r\n        children: {\r\n          type: \"\",\r\n          list: [{}]\r\n        }\r\n      });\r\n    },\r\n    handleSave() {\r\n      console.log(\"questList:\", this.questList);\r\n      let survey = this.$route.query._id;\r\n      Api.addQuest({ survey, data: this.questList })\r\n        .then(res => {\r\n          if (res.status == 1) {\r\n            this.$Message.success(res.msg);\r\n          } else {\r\n            this.$Message.error(res.msg);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$Message.error(\"请求错误或网络错误\");\r\n        });\r\n    },\r\n    handleDelete(cardIndex, _id) {\r\n      Api.delQuest({ _id })\r\n        .then(res => {\r\n          if (res.status == 1) {\r\n            this.$Message.success(res.msg);\r\n            this.questList.splice(cardIndex, 1);\r\n          } else {\r\n            this.$Message.error(res.msg);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.$Message.error(\"请求错误或网络错误\");\r\n        });\r\n    },\r\n    // 类型切换时\r\n    handleTypeChange(value, index) {\r\n      // console.log(\"value\", value, \"index:\", index);\r\n      let child = this.questList[index].children;\r\n      switch (value) {\r\n        case \"i-input\": {\r\n          child.type = \"\";\r\n          child.list.splice(0);\r\n          break;\r\n        }\r\n        case \"Rate\": {\r\n          child.type = \"\";\r\n          this.questList[index].value = 0;\r\n          child.list.splice(0);\r\n          break;\r\n        }\r\n        case \"radio-group\": {\r\n          child.type = \"radio\";\r\n\r\n          child.list.splice(0);\r\n          break;\r\n        }\r\n        case \"CheckboxGroup\": {\r\n          child.type = \"checkbox\";\r\n          this.questList[index].value = [];\r\n          child.list.splice(0);\r\n          break;\r\n        }\r\n        case \"i-select\": {\r\n          child.type = \"i-option\";\r\n          child.list.splice(0);\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    addOption(cardIndex) {\r\n      let questList = this.questList[cardIndex];\r\n      if (\r\n        !questList.type ||\r\n        questList.type == \"i-input\" ||\r\n        questList.type == \"Rate\"\r\n      ) {\r\n        this.$Message.error(\"当前类型不支持多个选择，请重新选择\");\r\n      } else {\r\n        let len = questList.children.list.length;\r\n\r\n        if (\r\n          len == 0 ||\r\n          ((len > 0 && questList.children.list[len - 1].label) ||\r\n            questList.children.list[len - 1].title)\r\n        ) {\r\n          questList.children.list.push({\r\n            title: \"\",\r\n            label: \"\"\r\n          });\r\n        } else {\r\n          this.$Message.error(\"请先输入完整各个选项才可以增加\");\r\n        }\r\n      }\r\n    },\r\n    // 删除选项时候\r\n    delOption(index, cardIndex) {\r\n      let questList = this.questList[cardIndex].children;\r\n      this.$Message.warning(\"删除 \" + questList.list[index].title);\r\n      questList.list.splice(index, 1);\r\n    }\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    let survey = this.$route.query._id;\r\n    Api.getQuest({ survey })\r\n      .then(res => {\r\n        if (res.status == 1) {\r\n          this.$Message.success(res.msg);\r\n          console.log(\"req quest\", res.data);\r\n          this.questList = res.data;\r\n          this.spinShow = false;\r\n        } else {\r\n          this.$Message.error(res.msg);\r\n          this.spinShow = false;\r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.$Message.error(\"请求错误或网络错误\");\r\n        this.spinShow = false;\r\n      });\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.addQuest {\r\n  .header {\r\n    margin-bottom: 20px;\r\n  }\r\n  .card {\r\n    text-align: left;\r\n    margin: 20px 0;\r\n    .title {\r\n      height: 40px;\r\n      display: flex;\r\n      align-items: center;\r\n      .delBtn {\r\n        font-size: 20px;\r\n        height: 30px;\r\n        width: 30px;\r\n        color: #fff;\r\n        border-radius: 30px;\r\n        line-height: 30px;\r\n        text-align: center;\r\n        background: red;\r\n        display: inline-block;\r\n        position: absolute;\r\n        right: -15px;\r\n        top: -15px;\r\n        cursor: pointer;\r\n      }\r\n      .item {\r\n        flex: auto;\r\n      }\r\n    }\r\n    .body {\r\n      .setting {\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        .item {\r\n          flex: auto;\r\n        }\r\n      }\r\n      .options {\r\n        .item {\r\n          margin: 20px 10px 20px 0px;\r\n          display: flex;\r\n          .op {\r\n            flex: auto;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .label {\r\n    width: 60px;\r\n    display: inline-block;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/quests/addQuest.vue","<script>\r\nexport default {\r\n  name: \"renderBox\",\r\n  props: [\"form\"],\r\n  render(h) {\r\n    return h(\r\n      \"div\",\r\n      {\r\n        on: {},\r\n        style: {},\r\n        class: \"render\"\r\n      },\r\n      [\r\n        h(\"div\", { class: \"header\" }, [\r\n          h(\"div\", { class: \"title\" }, [\r\n            this.form.required ? h(\"span\", { class: \"require\" }, \"(*)\") : \"\",\r\n            h(\"span\", this.form.questIndex + 1 + \". \" + this.form.title)\r\n          ]),\r\n\r\n          h(\r\n            this.form.type,\r\n            {\r\n              class: \"content\",\r\n              props: {\r\n                type:\r\n                  this.form.kind && this.form.type === \"i-input\"\r\n                    ? this.form.kind\r\n                    : null\r\n              }\r\n            },\r\n            this.form.children.list.map(item => {\r\n              let opType = this.form.children.type;\r\n              if (opType) {\r\n                return h(\r\n                  opType,\r\n                  {\r\n                    class: \"item\",\r\n                    props: {\r\n                      title: item.title,\r\n                      label: opType != \"i-option\" ? item.label : null,\r\n                      value: opType == \"i-option\" ? item.label : null\r\n                    }\r\n                  },\r\n                  item.title\r\n                );\r\n              }\r\n            })\r\n          )\r\n        ]),\r\n        h(\"div\", {})\r\n      ]\r\n    );\r\n  },\r\n  mounted() {\r\n    // console.log(\"form:\", this.form);\r\n  },\r\n  updated() {\r\n    // console.log(\"update form:\", this.form);\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.render {\r\n  .header {\r\n    .title {\r\n      font-weight: 600;\r\n      font-size: 16px;\r\n      .require {\r\n        color: red;\r\n      }\r\n    }\r\n    .content {\r\n      margin-top: 16px;\r\n      width: 300px;\r\n\r\n      .item {\r\n        font-size: 14px;\r\n        margin-right: 18px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/render/renderQuest.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addQuest\"},[_c('div',{staticClass:\"header\"},[_c('Button',{attrs:{\"type\":\"success\",\"shape\":\"circle\",\"icon\":\"md-cloud-done\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"保存所有\")])],1),_vm._v(\" \"),(_vm.questList.length)?_vm._l((_vm.questList),function(card,cardIndex){return _c('Card',{key:'card'+_vm._uid+cardIndex,staticClass:\"card\",attrs:{\"bordered\":true,\"flag\":card.questIndex=cardIndex,\"index\":cardIndex}},[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"题目\"+_vm._s(cardIndex+1)+\":\")]),_vm._v(\" \"),_c('Input',{attrs:{\"placeholder\":\"输入题目\",\"clearable\":\"\"},model:{value:(card.title),callback:function ($$v) {_vm.$set(card, \"title\", $$v)},expression:\"card.title\"}}),_vm._v(\" \"),_c('span',{staticClass:\"delBtn\",on:{\"click\":function($event){return _vm.handleDelete(cardIndex,card._id)}}},[_vm._v(\"x\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"body\"},[_c('div',{staticClass:\"setting\"},[_c('div',{staticClass:\"item\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"类型:\")]),_vm._v(\" \"),_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"clearable\":\"\"},on:{\"on-change\":function($event){return _vm.handleTypeChange(card.type,cardIndex)}},model:{value:(card.type),callback:function ($$v) {_vm.$set(card, \"type\", $$v)},expression:\"card.type\"}},_vm._l((_vm.typeList),function(item){return _c('Option',{key:'type'+item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1),_vm._v(\" \"),(card.type=='i-input')?_c('span',[_c('Select',{staticStyle:{\"width\":\"100px\"},attrs:{\"clearable\":\"\"},model:{value:(card.kind),callback:function ($$v) {_vm.$set(card, \"kind\", $$v)},expression:\"card.kind\"}},[_c('Option',{attrs:{\"value\":\"text\"}},[_vm._v(\"单行文本框\")]),_vm._v(\" \"),_c('Option',{attrs:{\"value\":\"textarea\"}},[_vm._v(\"多行文本框\")])],1)],1):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"是否必填:\")]),_vm._v(\" \"),_c('i-switch',{model:{value:(card.required),callback:function ($$v) {_vm.$set(card, \"required\", $$v)},expression:\"card.required\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addOption(cardIndex)}}},[_c('Icon',{attrs:{\"type\":\"md-add\"}}),_vm._v(\"增加选项\\n            \")],1)],1)]),_vm._v(\" \"),(card.type&&card.type!=='i-input'&&card.type!='Rate')?_c('div',{staticClass:\"options\"},_vm._l((card.children.list),function(item,index){return _c('div',{key:'op'+_vm._uid+cardIndex+index,staticClass:\"item\"},[_c('div',{staticClass:\"op\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"选项:\")]),_vm._v(\" \"),_c('Input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"如..北京\",\"clearable\":\"\"},model:{value:(item.title),callback:function ($$v) {_vm.$set(item, \"title\", $$v)},expression:\"item.title\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"op\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"对应值:\")]),_vm._v(\" \"),(card.type==='i-select')?_c('Input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"如..beijing\",\"clearable\":\"\"},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", $$v)},expression:\"item.value\"}}):_c('Input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"如..beijing1\",\"clearable\":\"\"},model:{value:(item.label),callback:function ($$v) {_vm.$set(item, \"label\", $$v)},expression:\"item.label\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"op\"},[_c('Button',{attrs:{\"type\":\"error\"},on:{\"click\":function($event){return _vm.delOption(index,cardIndex)}}},[_c('Icon',{attrs:{\"type\":\"md-close-circle\"}}),_vm._v(\"删除\\n              \")],1)],1)])}),0):_vm._e()]),_vm._v(\" \"),_c('Divider',[_vm._v(\"渲染结果\")]),_vm._v(\" \"),_c('render-box',{attrs:{\"form\":card}})],1)}):_vm._e(),_vm._v(\" \"),(_vm.spinShow)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}}):_vm._e(),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"shape\":\"circle\",\"icon\":\"md-add-circle\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"增加题目\")]),_vm._v(\" \"),_c('BackTop')],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1b57cf84\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/quests/addQuest.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1b57cf84\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./addQuest.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./addQuest.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./addQuest.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1b57cf84\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./addQuest.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1b57cf84\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/quests/addQuest.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}